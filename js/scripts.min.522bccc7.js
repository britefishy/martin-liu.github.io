(function(){window.Config={name:"blog",debug:!1,uri:{base:"/",host:"/",api:"https://api.github.com/"},githubRepo:{name:"martin-liu.github.io",owner:"martin-liu"},"default":{displayCount:10},piwik:{enabled:!1,app:"appName",prod:"prodName",url:"",siteId:0},intro:{enabled:!1},urlHtml5Mode:!1,version:"0.0.1"}}).call(this),function(){Config.intros=[{intro:"Hello World!",position:"bottom"},{intro:"This is the header",position:"bottom"}]}.call(this),function(){Config.routes=[{url:"/",params:{name:"home",label:"Home",templateUrl:"partials/home.html",controller:"HomeCtrl"}},{url:"/article/:id",params:{name:"article",hide:!0,templateUrl:"partials/article.html",controller:"ArticleCtrl"}},{url:"/about",params:{name:"about",label:"About",templateUrl:"partials/about.html"}}]}.call(this),function(){angular.module("config",[]).config(["$routeProvider","$locationProvider","$logProvider",function(a,b,c){var d;(angular.isUndefined(Config.debug)||Config.debug!==!1)&&(Config.debug=!0),(angular.isUndefined(Config.development)||Config.development!==!1)&&(Config.development=!0),Config.debug===!1&&c.debugEnabled(!1),angular.forEach(Config.routes,function(b){b.params&&!b.params.controller&&(b.params.controller="BaseCtrl"),a.when(b.url,b.params)}),a.otherwise({templateUrl:"partials/404.html"}),d=!!Config.urlHtml5Mode&&Modernizr.history,b.html5Mode(d),b.hashPrefix("!")}]),window.onload=function(){var a;return angular.isUndefined(Config.name)&&console.error("Config.name is undefined, please update config.json to include this property."),a=function(){var a;return a={},function(b){var c;return a[b]?void 0:(c=b.substring(0,b.indexOf("Ctrl")),angular.module(Config.name).controller(b,["$scope",""+c+"ViewModel",function(a,b){return a.vm=new b(a)}]),a[b]=1)}}(),angular.forEach(Config.routes,function(b){var c;return c=b.params.controller,null==c&&(c="BaseCtrl"),a(c)}),angular.bootstrap(document,[Config.name])}}.call(this),function(){angular.module("m-util",[]).factory("Util",["$modal","$timeout","$location","$anchorScroll","$window","$http","$templateCache","$compile","$q","$route","Cache",function(a,b,c,d,e,f,g,h,i,j,k){var l;return new(l=function(){function l(){}var m;return m="partials/modal/alert.html",l.prototype.createDialog=function(b,c,d,e){var f,g;return null==e&&(e={}),f=!1,e=angular.extend({backdropFade:!0,templateUrl:b,controller:["$scope","$modalInstance","scope",function(a,b,c){return a=angular.extend(a,c),a.close=function(a){return f?void 0:(b.close(a),f=!0)}}],resolve:{scope:function(){return c}}},e),g=a.open(e),g.result.then(d),g},l.prototype.alert=function(a,b,c){var d,e;return d=function(){switch(b){case"success":return"alert-success";case"fail":return"alert-danger";case"confirm":return"alert-warning"}}(),e={message:a,type:b,"class":d},this.createDialog(m,e,c)},l.prototype.success=function(a,b){return this.alert(a,"success",b)},l.prototype.fail=function(a,b){return this.alert(a,"fail",b)},l.prototype.confirm=function(a,b){return this.alert(a,"confirm",b)},l.prototype.compileTemplate=function(a,b){var c,d;return c=i.defer(),d=f.get(a,{cache:g}),d.success(function(a){return c.resolve(h(a)(b))}),c.promise},l.prototype.toggleFullscreen=function(a){return angular.element(document.body).toggleClass("fullscreenStatic"),angular.element(a).toggleClass("fullscreen")},l.prototype.daysBetween=function(a,b){var c,d,e,f;return f=864e5,c=a.getTime(),d=b.getTime(),e=Math.abs(d-c),Math.round(e/f)},l.prototype.formatDate=function(a){return"0000-00-00 00:00:00"===a?"":a},l.prototype.truncDate=function(a){return a&&"0000-00-00"!==a?a.match(/\S+/g)[0]:""},l.prototype.truncateCharacter=function(a,b,c){var d;if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>=b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length(-1));else d=a.lastIndexOf(" "),-1!==d&&(a=a.substr(0,d));return a+"..."}return a},l.prototype.redirect=function(a,b){return a=a.replace("%",""),c.url()!==a?c.url(a):b?j.reload():void 0},l.prototype.reload=function(){return j.reload()},l.prototype.scrollTo=function(a){return e.scrollTo(0,a)},l.prototype.setUpScrollHandler=function(a,c){return b(function(){var b;return b=document.getElementById(a),b?(d(),angular.element(b).triggerHandler(c)):void 0},0)},l.prototype.getParams=function(){return c.search()},l.prototype.getUserParam=function(a){return{nt:a.nt,fullname:a.displayName,label:a.label}},l.prototype.getWithCache=function(a,b,c,d){var e,f,g,h;return e=k,b&&(e=k.session),g=i.defer(),f=e.get(a),f?(g.resolve(f),g.promise):(h=c(),h.then(function(b){var c;try{return e.set(a,b,d)}catch(f){return c=f,console.log(c)}}),h)},l.prototype.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},l.prototype.solrEscape=function(a){return a.replace(/[+\-\!\(\)\{\}\[\]\^"~\*\?:\\]+/g," ")},l.prototype.removeHtmlTags=function(a){return a.replace(/<[^>]*>?/g,"")},l.prototype.waitUntil=function(a,c,d,e){var f;return null==d&&(d=300),null==e&&(e=100),(f=function(g){var h,j;return h=i.defer(),0>=g?h.reject("exceed "+e+" times check"):(j=a(),c(j)?h.resolve(j):b(function(){return function(){return f(g-1).then(function(a){return h.resolve(a)},function(a){return h.reject(a)})}}(this),d)),h.promise})(e)},l.prototype.recurUntil=function(a,b,c,d,e){var f;return null==e&&(e=100),(f=function(g,h){var j,k;return j=i.defer(),0>=g?j.reject("exceed "+e+" times check"):(k=g===e?a.apply(this,c):a.apply(this,d(h)),b(k)?j.resolve(k):f(g-1,k).then(function(a){return j.resolve(a)},function(a){return j.reject(a)})),j.promise})(e)},l.prototype.deepExtend=function(){var a,b;return arguments.length<1||"object"!=typeof arguments[0]?!1:arguments.length<2?arguments[0]:(b=arguments[0],a=Array.prototype.slice.call(arguments,1),a.forEach(function(a){return function(c){var d,e,f,g,h;if("object"==typeof c){h=[];for(e in c)e in c&&(f=b[e],g=c[e],g!==b&&("object"==typeof g&&null!==g?g instanceof Date?b[e]=new Date(g.getTime()):g instanceof RegExp?b[e]=new RegExp(g):"object"==typeof f&&null!==f?(d=Array.isArray(g)?Array.isArray(f)?f:[]:Array.isArray(f)?{}:f,h.push(b[e]=a.deepExtend(d,g))):(d=Array.isArray(g)?[]:{},b[e]=a.deepExtend(d,g)):b[e]=g));return h}}}(this)),b)},l.prototype.clicker=function(a,b,c){var d,e;return null==c&&(c=500),d=0,e=null,function(){var f;return f=arguments,d+=1,1===d?e=setTimeout(function(b){return function(){return d=0,_.isFunction(a)?a.apply(b,f):void 0}}(this),c):(d=0,clearTimeout(e),_.isFunction(b)?b.apply(this,f):void 0)}},l}())}])}.call(this),function(){angular.module("m-directive",["m-util"])}.call(this),function(){window.App=angular.module(Config.name,["templates","ngSanitize","ngRoute","ngAnimate","restangular","ui.bootstrap","headroom","duoshuo","config","m-directive","m-service"]),angular.module("m-service",["m-util"]),angular.module("m-directive",["m-util"]),App.constant("Config",Config),App.constant("Cache",locache),App.constant("_",_),App.config(["$provide","$httpProvider","RestangularProvider",function(a,b,c){return c.setBaseUrl(Config.uri.api),c.setDefaultRequestParams("jsonp",{callback:"JSON_CALLBACK"}),b.interceptors.push(["$timeout","$q","$rootScope","$location",function(a,b,c){return{request:function(a){return a||b.when(a)},responseError:function(a){var d;return a.data&&a.data.message&&(d="partials/modal/error_handler.html",c.Util.createDialog(d,{message:a.data.message},function(){})),b.reject(a)}}}])}]),App.run(["AppInitService","$rootScope","$location","Config",function(a,b,c){return a.init(),b.$on("$routeChangeSuccess",function(){return _hmt?_hmt.push(["_trackPageview",c.url()]):void 0})}])}.call(this),function(){App.constant("Constant",{dict:{}})}.call(this),function(){angular.module("m-directive").directive("mBreadcrumb",function(){return{restrict:"AE",scope:{},controller:["$scope","breadcrumbs",function(a,b){return a.breadcrumbs=b}],template:'<ol class="ab-nav breadcrumb">\n  <li ng-repeat="breadcrumb in breadcrumbs.get() track by breadcrumb.path"\n    ng-class="{ active: $last }">\n    <a ng-if="!$last" ng-href="{{ breadcrumb.path }}"\n      ng-bind="breadcrumb.label" class="margin-right-xs"></a>\n    <span ng-if="$last" ng-bind="breadcrumb.label"></span>\n  </li>\n</ol>'}})}.call(this),function(){angular.module("m-directive").directive("mCompile",["$compile",function(a){return{restrict:"A",link:function(b,c,d){return b.$watch(function(){return b.$eval(d.mCompile)},function(d){return c.html(d),a(c.contents())(b)})}}}])}.call(this),function(){angular.module("m-directive").directive("mDynamicTpl",["Util","$rootScope",function(a,b){var c;return c=function(c,d){return c.Util=a,c.dict=b.dict,a.compileTemplate(c.tpl,c).then(function(a){return d.replaceWith(a)})},{restrict:"E",scope:{tpl:"=",data:"=",actions:"="},link:c}}])}.call(this),function(){angular.module("m-directive").directive("mFullscreen",function(){var a;return a=function(b,c){var d,e,f,g,h,i;if(b=angular.element(b),e=b.children(),f=_.find(e,function(a){return c(a)}))return f;for(h=0,i=e.length;i>h;h++)if(d=e[h],g=a(d,c))return g},{restrict:"A",scope:{},link:function(b,c){var d;return d=a(c,function(a){return"m-fullscreen"===angular.element(a).attr("data-toggle")}),d?(d=angular.element(d),d.attr("style","cursor:sw-resize"),d.bind("click",function(){return angular.element(document.body).toggleClass("fullscreenStatic"),c.toggleClass("fullscreen")}),b.$on("$destroy",function(){return d.unbind("click")})):void 0}}})}.call(this),function(){angular.module("m-directive").directive("mLoading",function(){return{restrict:"E",scope:{},template:'<div class="loading">\n<i class="fa fa-spinner fa-spin pull-left">\n</i>\n<h4>{{ text }}</h4>\n</div>',link:function(a,b,c){return a.text=c.text,null!=a.text?a.text:a.text="Loading..."}}})}.call(this),function(){angular.module("m-directive").directive("mAnnouncement",["$position",function(a){return{restrict:"AE",scope:{announcements:"="},template:'<span ng-show="show">\n<i class="fa fa-bullhorn animated infinite"\n   ng-class="{flash:flash}"></i>\n<div class="popover right fade in"\n  style="transform:translateY(-40%);word-break:break-word;">\n  <div class="arrow" style="top:90%"></div>\n  <div class="popover-inner">\n  <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n  <div class="popover-content">\n    <alert ng-repeat="a in announcements"\n      type="{{a.type || \'success\'}}"\n      style="margin:3px;padding:2px">\n      <p>\n        <div class="label label-primary"\n          style="margin-right:5px">\n          {{a.date | date:\'yyyy-MM-dd HH:mm:ss\'}}\n        </div>\n        <div style="margin-left:5px">{{a.msg}}</div>\n      </p>\n    </alert>\n  </div>\n  </div>\n</div>\n</span>',controller:["$scope",function(a){var b;return b="viewed_annoucement_date",a.$watch("announcements",function(c){var d;return c&&c.length?(a.show=!0,d=c[0],new Date(d.date)>new Date(localStorage.getItem(b))&&(a.flash=!0),localStorage.setItem(b,d.date)):void 0},!0),a.stopFlash=function(){return a.flash=!1}}],link:function(b,c,d){var e,f;return e=c.find("i"),f=c.find("div"),f.length&&(f=angular.element(f[0])),b.title=d.title||"Announcements",c.bind("mouseenter",function(){var c;return b.$apply(b.stopFlash),f.css("display","block"),c=a.positionElements(e,f,d.placement||"right"),c.top+="px",c.left+="px",f.css(c)}),c.bind("mouseleave",function(){return f.css("display","none")}),b.$on("$destroy",function(){return c.unbind("mouseenter"),c.unbind("mouseleave")})}}}])}.call(this),function(){angular.module("m-directive").directive("mMoreButton",["$parse","$q",function(){return{restrict:"E",scope:{currentCount:"=currentCount",loadFunc:"=loadFunc",allCount:"=allCount"},transclude:!0,templateUrl:"partials/directive/moreButton.html",link:function(a){return a.has_more=function(){return a.currentCount<a.allCount},a.loaded=!0,a.show_more=function(){return a.loaded=!1,a.loadFunc(a.currentCount).then(function(){return a.loaded=!0})}}}}])}.call(this),function(){angular.module("m-directive").directive("mNoResult",function(){return{restrict:"E",scope:{},template:'<div class="no-result">\n  {{ text }}\n</div>',link:function(a,b,c){return a.text=c.text,null!=a.text?a.text:a.text="No Result."}}})}.call(this),function(){angular.module("m-directive").directive("mResize",["$window",function(a){return{restrict:"A",scope:{},link:function(b,c,d){var e,f,g,h,i,j,k;return k=a,e=k.innerHeight,j=d.mResize,g=d.mResizeFixed,h=d.mResizeMin||0,j||(j=100),i=j/100,f=Math.max(e*i,h),"true"===g?(c.css("height",f),c.css("overflow-y","auto"),c.css("overflow-x","auto")):c.css("min-height",f)}}}])}.call(this),function(){angular.module("m-directive").directive("mScroll",function(){return{restrict:"A",link:function(a,b,c){var d,e,f;return f=c.scroll,e=c.scrollBottom,d=b[0],f||e?(b.bind("scroll",_.debounce(function(){return f&&a.$apply(f),e&&d.scrollTop+d.offsetHeight+5>=d.scrollHeight?a.$apply(e):void 0},200)),a.$on("destroy",function(){return b.unbind("scroll")})):void 0}}})}.call(this),function(){App.factory("animateCSSBuild",["$timeout",function(a){var b;return b=500,function(c,d){var e,f,g,h,i;return 3===arguments.length&&(e=d,h=arguments[2],d={enter:e,move:e,leave:h,show:e,hide:h,addClass:e,removeClass:h}),i="$$animate.css-timer",g=function(c,d,e,f){var g;c.addClass(d),c.addClass("animated"),g=a(f,e||b,!1),c.data(i,g)},f=function(b,c){return function(){var d;d=b.data(i),d&&(a.cancel(d),b.removeData(i)),b.removeClass(c),b.removeClass("animated")}},{enter:function(a,b){return g(a,d.enter,d.delay,b),f(a,d.enter)},leave:function(a,b){return g(a,d.leave,d.delay,b),f(a,d.leave)},move:function(a,b){return g(a,d.move,d.delay,b),f(a,d.move)},beforeAddClass:function(a,b,c){var e;return(e="ng-hide"===b&&(d.hide||(angular.isFunction(d.addClass)?d.addClass(b):d.addClass)))?(g(a,e,d.delay,c),f(a,e)):void c()},addClass:function(a,b,c){var e;return(e="ng-hide"!==b&&(angular.isFunction(d.addClass)?d.addClass(b):d.addClass))?(g(a,e,d.delay,c),f(a,e)):void c()},removeClass:function(a,b,c){var e;return(e="ng-hide"===b&&d.show||(angular.isFunction(d.removeClass)?d.removeClass(b):d.removeClass))?(g(a,e,d.delay,c),f(a,e)):void c()}}}}]).animation(".animate-flip-x",["animateCSSBuild",function(a){return a("animate-flip-x","flipInX","flipOutX")}]).animation(".animate-flip-y",["animateCSSBuild",function(a){return a("animate-flip-y","flipInY","flipOutY")}]).animation(".animate-fade",["animateCSSBuild",function(a){return a("animate-fade","fadeIn","fadeOut")}]).animation(".animate-fade-up",["animateCSSBuild",function(a){return a("animate-fade-up","fadeInUp","fadeOutUp")}]).animation(".animate-fade-down",["animateCSSBuild",function(a){return a("animate-fade-down","fadeInDown","fadeOutDown")}]).animation(".animate-fade-left",["animateCSSBuild",function(a){return a("animate-fade-left","fadeInLeft","fadeOutLeft")}]).animation(".animate-fade-right",["animateCSSBuild",function(a){return a("animate-fade-right","fadeInRight","fadeOutRight")}]).animation(".animate-fade-up-big",["animateCSSBuild",function(a){return a("animate-fade-up-big","fadeInUpBig","fadeOutUpBig")}]).animation(".animate-fade-down-big",["animateCSSBuild",function(a){return a("animate-fade-down-big","fadeInDownBig","fadeOutDownBig")}]).animation(".animate-fade-left-big",["animateCSSBuild",function(a){return a("animate-fade-left-big","fadeInLeftBig","fadeOutLeftBig")}]).animation(".animate-fade-right-big",["animateCSSBuild",function(a){return a("animate-fade-right-big","fadeInRightBig","fadeOutRightBig")}]).animation(".animate-bounce",["animateCSSBuild",function(a){return a("animate-bounce","bounceIn","bounceOut")}]).animation(".animate-bounce-up",["animateCSSBuild",function(a){return a("animate-bounce-up","bounceInUp","bounceOutUp")}]).animation(".animate-bounce-down",["animateCSSBuild",function(a){return a("animate-bounce-down","bounceInDown","bounceOutDown")}]).animation(".animate-bounce-left",["animateCSSBuild",function(a){return a("animate-bounce-left","bounceInLeft","bounceOutLeft")}]).animation(".animate-bounce-right",["animateCSSBuild",function(a){return a("animate-bounce-right","bounceInRight","bounceOutRight")}]).animation(".animate-rotate",["animateCSSBuild",function(a){return a("animate-rotate","rotateIn","rotateOut")}]).animation(".animate-rotate-up-left",["animateCSSBuild",function(a){return a("animate-rotate-up-left","rotateInUpLeft","rotateOutUpLeft")}]).animation(".animate-rotate-down-left",["animateCSSBuild",function(a){return a("animate-rotate-down-left","rotateInDownLeft","rotateOutDownLeft")}]).animation(".animate-rotate-up-right",["animateCSSBuild",function(a){return a("animate-rotate-up-right","rotateInUpRight","rotateOutUpRight")}]).animation(".animate-rotate-down-right",["animateCSSBuild",function(a){return a("animate-rotate-down-right","rotateInDownRight","rotateOutDownRight")}]).animation(".animate-lightspeed",["animateCSSBuild",function(a){return a("animate-lightspeed","lightSpeedIn","lightSpeedOut")}]).animation(".animate-roll",["animateCSSBuild",function(a){return a("animate-roll","rollIn","rollOut")}]).animation(".animate-hinge",["animateCSSBuild",function(a){return a("animate-hinge","fadeIn","hinge")}])}.call(this),function(){App.factory("AppInitService",["$rootScope","$window","IntroService","$q","Util","Config","Cache","Constant",function(a,b,c,d,e,f,g,h){var i;return i=[],{init:function(){var b;return a.$on("$routeChangeSuccess",function(b,c){return a.currentPage=c.name}),a.Util=e,a.config=f,a.user=angular.fromJson(localStorage.getItem("user")),a.dict={get:function(a){var b;return b=h.dict[a],null==b&&(b=a),b}},a.startIntro=function(){return c.start()},a.persistence={},b=d.defer(),i.push(b),a.$watch(function(){return function(){return angular.toJson(a.persistence)}}(this),function(){return function(c,d){var e;return e="persistent_object",c===d?(_.extend(a.persistence,g.get(e)),b.resolve()):g.set(e,JSON.parse(c))}}(this),!0)},add:function(a){return i.push(a)},done:function(){return d.all(i)}}}])}.call(this),function(){App.factory("BlogService",["BlogRemoteService",function(a){return{decorateBlog:function(b){var c,d,e;if(!b.body)return b;e=b.body.substring(0,b.body.indexOf("-->")),e=e.replace(/\n|\r|<!-{2,}/gm," ");try{d=JSON.parse(e)}catch(f){c=f,console.log(c)}return b.meta=d,b.meta&&b.meta.summary&&a.renderMarkdown(b.meta.summary).then(function(a){return b.meta.summary=a}),b}}}])}.call(this),function(){App.factory("breadcrumbs",["$rootScope","$location","$route",function(a,b,c){var d;return d={breadcrumbs:[],get:function(){var a,b;if(this.options){b=this;for(a in this.options)this.options.hasOwnProperty(a)&&angular.forEach(b.breadcrumbs,function(c){c.label===a&&(c.label=b.options[a])})}return this.breadcrumbs},generateBreadcrumbs:function(){var a,d,e,f,g;f=c.routes,e=b.path().split("/"),d="",g=this,a=function(a){var b;return b=void 0,angular.forEach(c.current.params,function(c,d){var e;e=new RegExp(c),e.test(a)&&(b=c),a=a.replace(e,":"+d)}),{path:a,param:b}},""===e[1]&&delete e[1],this.breadcrumbs=[],angular.forEach(e,function(b){var c,e;d+="/"===d?b:"/"+b,e=a(d),f[e.path]&&(c=f[e.path].label||e.param,g.breadcrumbs.push({label:c,path:d}))})}},a.$on("$routeChangeSuccess",function(){d.generateBreadcrumbs()}),d}])}.call(this),function(){App.factory("IntroService",["Config","Cache","$timeout",function(a,b,c){var d,e,f;return f=null,d=""+a.name+"_IntroService_init",e=function(){var b,c;return"undefined"!=typeof introJs&&null!==introJs?(c=a.intros,b=document.querySelectorAll(".intro-step"),c=_.map(c,function(a,c){var d;return d=_.find(b,function(a){var b;return a=angular.element(a),b=a.attr("intro-step"),c===parseInt(b-1)}),d&&(a.element=d),a}),f=introJs(),f.setOptions({steps:c}),f.onafterchange(function(){return f.refresh()})):void 0},{init:function(){var a,f;return e(),a=b.get(d),a?void 0:(f=this.start,c(function(){return f()?b.set(d,!0):void 0},1500))},start:function(){return f?(f.start(),!0):!1}}}])}.call(this),function(){App.factory("LoadingService",["$rootScope","$q","$timeout","Util",function(a,b,c,d){return{init:function(){var e;return e=b.defer(),a.$watch(function(){return a.loading},function(){return null==a.loading?(a.initializing=10,a.loadDialog=d.createDialog("partials/modal/loading.html",null,angular.noop,{backdrop:"static"})):"loaded"===a.loading?(null!=a.loadDialog&&(a.initializing=100,c(function(){return a.loadDialog.close()},1e3)),a.initiated=!0,e.resolve()):void 0}),e.promise},done:function(){return a.loading="loaded"}}}])}.call(this),function(){App.factory("NProgressService",["$timeout",function(a){return{start:function(){return NProgress?NProgress.start():void 0},done:function(){return NProgress?a(function(){return NProgress.done()},1e3):void 0}}}])}.call(this),function(){App.factory("PiwikService",["Config",function(a){return{init:function(b,c){var d,e,f,g,h;return"undefined"!=typeof Piwik&&null!==Piwik?(h=a.piwik.siteId,f=a.piwik.url,d=a.piwik.app,g=a.piwik.prod,e=Piwik.getTracker(""+f+"/piwik.php",h),e.setCustomVariable(1,"User",b,"visit"),e.setCustomVariable(2,"App",d,"page"),e.setCustomVariable(3,"PageName",c,"page"),e.setCustomVariable(4,"Prod",g,"page"),e.trackPageView(),e.enableLinkTracking()):void 0}}}])}.call(this),function(){App.factory("BaseRemoteService",["Config","Restangular","Util","$q","$timeout",function(a,b,c,d,e){var f;return f=function(){function f(){this.rest=b.all("")}return f.prototype.getCacheKey=function(b,c){var d,e;return d=/function\s+(\w+)\(.*\).*/.exec(this.constructor.toString()),2===d.length&&(e=d[1]),""+a.name+"_"+e+"_"+b+"_"+JSON.stringify(c)},f.prototype.getWithCache=function(a,b,d,e){return null==e&&(e=300),c.getWithCache(this.getCacheKey(a,b),!0,d,e)},f.prototype.doQuery=function(a,b,c){var d;return c&&c.promise?(d={timeout:c.promise},this.rest.one(a).withHttpConfig(d).get(b)):this.rest.one(a).get(b)},f.prototype.doQueryWithCache=function(a,b,c,d){return null==d&&(d=300),this.getWithCache(a,b,function(d){return function(){var e;return c&&c.promise?(e={timeout:c.promise},d.rest.one(a).withHttpConfig(e).get(b)):d.rest.one(a).get(b)}}(this),d)},f.prototype.mockResult=function(a,b){var c;return null==b&&(b=1e3),c=d.defer(),e(function(){return c.resolve(a)},b),c.promise},f}()}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};App.factory("BlogRemoteService",["Config","Restangular","Util","BaseRemoteService",function(a,c,d,e){var f,g;return g={state:"open",labels:a.debug?"":"blog",page:1,per_page:10,creator:a.githubRepo.owner},new(f=function(d){function e(){var b;b=a.githubRepo,this.rest=c.all("repos/"+b.owner+"/"+b.name)}return b(e,d),e.prototype.getBlogs=function(a){return a=_.extend(g,a),this.doQueryWithCache("issues",a)},e.prototype.getBlog=function(a,b){return b=_.extend(g,b),this.doQueryWithCache("issues/"+a,b)},e.prototype.renderMarkdown=function(a){return this.getWithCache("markdown",a,function(){return c.all("markdown").post({text:a,mode:"gfm"})})},e}(e))}])}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};App.factory("SampleRemoteService",["Restangular","BaseRemoteService",function(a,c){var d;return new(d=function(c){function d(){d.__super__.constructor.call(this),this.rest=a.all("sample")}return b(d,c),d.prototype.query=function(a){return this.doQuery("test1",a)},d.prototype.queryWithCanceler=function(a,b){return this.doQuery("test2",a,b)},d.prototype.queryWithCache=function(a){return this.doQueryWithCache("test3",a,null,300)},d.prototype.queryWithCancelerAndCache=function(a,b){return this.doQueryWithCache("test4",a,b,300)},d}(c))}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};App.factory("ArticleViewModel",["$rootScope","BlogRemoteService","$routeParams","BlogService","BaseViewModel","Util",function(b,d,e,f,g){var h;return h=function(g){function h(){return this.bindAction=a(this.bindAction,this),this.bindView=a(this.bindView,this),h.__super__.constructor.apply(this,arguments)}return c(h,g),h.prototype.bindView=function(){var a;return a=e.id,d.getBlog(a).then(function(a){return function(c){return c.body?(a.data.blog=f.decorateBlog(c),d.renderMarkdown(c.body).then(function(b){return a.data.content=b}),b.blog=a.data.blog):void 0}}(this))},h.prototype.bindAction=function(){},h}(g)}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};App.factory("BaseViewModel",["$q","$location","PiwikService","$timeout","$rootScope","AppInitService","Config","LoadingService","IntroService","NProgressService",function(b,c,d,e,f,g,h,i,j,k){var l;return l=function(){function e(b){this.scope=b,this.pageInit=a(this.pageInit,this),this.bindAction=a(this.bindAction,this),this.bindView=a(this.bindView,this),this.initialize=a(this.initialize,this),this.state={},this.data={},this.actions=this.bindAction(),g.done().then(function(a){return function(){return a.pageInit().then(a.bindView),h.debug===!0?(window.vm=a,window.scope=a.scope):void 0}}(this))}return e.prototype.initialize=function(){var a;return a=b.defer(),a.resolve(),a.promise},e.prototype.bindView=function(){},e.prototype.bindAction=function(){},e.prototype.logout=function(){return localStorage.clear(),c.url("/logout")},e.prototype.pageInit=function(){var a;return a=b.defer(),k.start(),this.initialize().then(function(b){return function(){return k.done(),h.intro.enabled&&j.init(),h.piwik.enabled&&b.scope.user&&d.init(b.scope.user.nt,f.currentPage),a.resolve()}}(this)),a.promise},e}()}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};App.factory("HomeViewModel",["BlogRemoteService","BlogService","BaseViewModel","Util",function(b,d,e){var f;return f=function(e){function f(){return this.bindAction=a(this.bindAction,this),this.bindView=a(this.bindView,this),f.__super__.constructor.apply(this,arguments)}return c(f,e),f.prototype.bindView=function(){return b.getBlogs().then(function(a){return function(b){return a.data.blogs=a.processBlogs(b)}}(this))},f.prototype.processBlogs=function(a){return _.map(a,d.decorateBlog)},f.prototype.bindAction=function(){},f}(e)}])}.call(this),angular.module("templates",["partials/404.html","partials/about.html","partials/article.html","partials/directive/moreButton.html","partials/home.html","partials/logout.html","partials/modal/alert.html","partials/modal/error_handler.html","partials/modal/loading.html"]),angular.module("partials/404.html",[]).run(["$templateCache",function(a){a.put("partials/404.html",'<div class="container">\n  <h1>404! Page Not Found!</h1>\n</div>\n')}]),angular.module("partials/about.html",[]).run(["$templateCache",function(a){a.put("partials/about.html",'<p>Martin Liu</p>\n<p>Web Architect</p>\n<p>Github: <a href="http://github.com/martin-liu" target="_blank">http://github.com/martin-liu</a></p>\n<p>Email: <a href="mailto:hflh1989@gmail.com">hflh1989@gmail.com</a></p>\n')}]),angular.module("partials/article.html",[]).run(["$templateCache",function(a){a.put("partials/article.html",'<m-loading ng-if="!vm.data.content"></m-loading>\n<div ng-if="vm.data.content">\n  <h2 class="align-center" ng-bind="vm.data.blog.title"></h2>\n  <p ng-bind="vm.data.blog.created_at | date:\'yyyy-MM-dd hh:mm:ss\'" class="created-at"></p>\n  <br/>\n  <div class="blog-content markdown-body" ng-bind-html="vm.data.content"></div>\n</div>\n\n<br/>\n<br/>\n<hr/>\n<p>欢迎扫码订阅公众号:</p>\n<img width="120" src="/image/qrcode_wechat.6578644e.jpg"/>\n<div ng-if="vm.data.blog.number" class="ds-thread"\n     duoshuo data-thread-key="{{vm.data.blog.number}}" data-author-key="1"></div>\n')}]),angular.module("partials/directive/moreButton.html",[]).run(["$templateCache",function(a){a.put("partials/directive/moreButton.html",'<div style="margin: 5px" ng-if="allCount > 0">\n    <div>\n        <div class="pull-right">\n            <span style="vertical-align:middle;color: grey;font-size: 15px"><strong>{{currentCount}} of {{ allCount }}</strong></span>\n            <button ng-if="has_more()" class="btn action-btn details-btn" style="float: none" ng-click="show_more()" ng-disabled="!loaded">\n                <i class="icon-plus icon-white"></i>More\n            </button>\n        </div>\n        <div class="clearfix" style="margin: 5px"></div>\n        <div class="pull-right">\n'+"            {{ loaded ? '' : 'Loading...' }}\n        </div>\n    </div>\n</div>\n")}]),angular.module("partials/home.html",[]).run(["$templateCache",function(a){a.put("partials/home.html",'<m-loading ng-if="!vm.data.blogs"></m-loading>\n<div ng-if="vm.data.blogs" ng-repeat="blog in vm.data.blogs">\n  <a class="blog-title-link" ng-href="#!/article/{{blog.number}}">\n    <h3 ng-bind="blog.title"></h3>\n  </a>\n  <p class="summary markdown-body" ng-bind-html="blog.meta.summary"></p>\n  <p>\n    <a ng-href="#!/article/{{blog.number}}">阅读全文...</a>\n  </p>\n  <span ng-bind="blog.created_at | date:\'yyyy-MM-dd\'"></span>\n  <hr/>\n</div>\n')}]),angular.module("partials/logout.html",[]).run(["$templateCache",function(a){a.put("partials/logout.html",'<div class="row-fluid alert">\n    <h4>You are not logged in.</h4>\n    <h4><a href="" onclick="javascript:location.reload()">Log In Now</a></h4>\n</div>')}]),angular.module("partials/modal/alert.html",[]).run(["$templateCache",function(a){a.put("partials/modal/alert.html",'<div>\n    <div class="modal-header" style="padding: 0 15px">\n        <h4 ng-if="type == \'success\'">Success!</h4>\n        <h4 ng-if="type == \'fail\'">Fail!</h4>\n        <h4 ng-if="type == \'confirm\'">Confirm</h4>\n    </div>\n    <div class="modal-body">\n        <p class="alert {{class}}" ng-bind-html="message"></p>\n    </div>\n    <div class="modal-footer" style="padding: 5px 20px">\n      <div ng-if="type == \'confirm\'">\n        <button ng-click="close(true)" class="btn btn-primary" >Yes</button>\n        <button ng-click="close(false)" class="btn btn-primary" >No</button>\n      </div>\n      <div ng-if="type != \'confirm\'">\n        <button ng-click="close()" class="btn btn-primary" >Close</button>\n      </div>\n    </div>\n</div>\n')}]),angular.module("partials/modal/error_handler.html",[]).run(["$templateCache",function(a){a.put("partials/modal/error_handler.html",'<div class="{{ animate }}">\n    <div class="modal-header">\n        <h4>Request Error</h4>\n    </div>\n    <div class="modal-body">\n        <p class="alert alert-danger">\n            {{ message ? message : dict.get(\'unkownError\') }}\n        </p>\n    </div>\n    <div class="modal-footer">\n        <button ng-click="close()" class="btn btn-primary" >Close</button>\n    </div>\n</div>\n')}]),angular.module("partials/modal/loading.html",[]).run(["$templateCache",function(a){a.put("partials/modal/loading.html",'<div class="modal-content">\n    <div class="modal-header">\n        <h3>Initializing...</h3>\n    </div>\n    <div class="modal-body">\n        <div class="progress progress-striped active">\n            <div class="progress-bar" style="width: {{ initializing }}%" role="progressbar" aria-valuenow="{{ initializing }}" aria-valuemin="0" aria-valuemax="100"></div>\n        </div>\n    </div>\n</div>\n')}]);